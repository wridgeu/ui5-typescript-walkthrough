{"version":3,"file":"Detail.controller.js","names":["Detail","Controller","extend","onInit","_onInit","viewModel","JSONModel","currency","this","getView","setModel","router","getOwnerComponent","getRouter","getRoute","attachPatternMatched","onObjectMatched","_onObjectMatched","event","byId","reset","bindElement","path","window","decodeURIComponent","getParameter","invoicePath","model","onNavBack","_onNavBack","history","History","getInstance","previousHash","getPreviousHash","undefined","go","navTo","onRatingChange","_onRatingChange","value","resourceBundle","getModel","getResourceBundle","MessageToast","show","getText"],"sources":["Detail.controller.ts"],"sourcesContent":["import Controller from \"sap/ui/core/mvc/Controller\";\nimport Component from \"../Component\";\nimport { Route$PatternMatchedEvent } from \"sap/ui/core/routing/Route\";\nimport History from \"sap/ui/core/routing/History\";\nimport MessageToast from \"sap/m/MessageToast\";\nimport ProductRating, { ProductRating$ChangeEvent } from \"../control/ProductRating\";\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\nimport JSONModel from \"sap/ui/model/json/JSONModel\";\n\n/**\n * @namespace ui5.walkthrough.controller\n */\nexport default class Detail extends Controller {\n\n    onInit(): void {\n        const viewModel = new JSONModel({\n            currency: \"EUR\"\n        });\n        this.getView().setModel(viewModel, \"view\");\n        \n        const router = (<Component> this.getOwnerComponent()).getRouter();\n        router.getRoute(\"detail\").attachPatternMatched(this.onObjectMatched, this);\n    }\n\n    onObjectMatched(event: Route$PatternMatchedEvent): void {\n    \n        (<ProductRating> this.byId(\"rating\")).reset();\n        this.getView().bindElement({\n            path: \"/\" + window.decodeURIComponent((<any> event.getParameter(\"arguments\")).invoicePath),\n            model: \"invoice\"\n        });\n    }\n\n    onNavBack(): void {\n        const history = History.getInstance();\n        const previousHash = history.getPreviousHash();\n\n        if (previousHash !== undefined) {\n            window.history.go(-1);\n        } else {\n            const router = (<Component> this.getOwnerComponent()).getRouter();\n            router.navTo(\"overview\", {}, true);\n        }\n    }    \n\n    onRatingChange(event: ProductRating$ChangeEvent): void {\n        const value = event.getParameter(\"value\");\n        const resourceBundle = <ResourceBundle> (<ResourceModel> this?.getView().getModel(\"i18n\"))?.getResourceBundle();\n\n        MessageToast.show(resourceBundle.getText(\"ratingConfirmation\", [value]));\n    }    \n};"],"mappings":"0KAUA,MAGqBA,EAAeC,EAAUC,OAAA,qCAE1CC,OAAM,SAAAC,IACF,MAAMC,EAAY,IAAIC,EAAU,CAC5BC,SAAU,QAEdC,KAAKC,UAAUC,SAASL,EAAW,QAEnC,MAAMM,EAAsBH,KAAKI,oBAAqBC,YACtDF,EAAOG,SAAS,UAAUC,qBAAqBP,KAAKQ,gBAAiBR,KACzE,EAEAQ,gBAAe,SAAAC,EAACC,GAEKV,KAAKW,KAAK,UAAWC,QACtCZ,KAAKC,UAAUY,YAAY,CACvBC,KAAM,IAAMC,OAAOC,mBAA0BN,EAAMO,aAAa,aAAcC,aAC9EC,MAAO,WAEf,EAEAC,UAAS,SAAAC,IACL,MAAMC,EAAUC,EAAQC,cACxB,MAAMC,EAAeH,EAAQI,kBAE7B,GAAID,IAAiBE,UAAW,CAC5BZ,OAAOO,QAAQM,IAAI,EACvB,KAAO,CACH,MAAMzB,EAAsBH,KAAKI,oBAAqBC,YACtDF,EAAO0B,MAAM,WAAY,CAAC,EAAG,KACjC,CACJ,EAEAC,eAAc,SAAAC,EAACrB,GACX,MAAMsB,EAAQtB,EAAMO,aAAa,SACjC,MAAMgB,EAAmDjC,MAAMC,UAAUiC,SAAS,SAAUC,oBAE5FC,EAAaC,KAAKJ,EAAeK,QAAQ,qBAAsB,CAACN,IACpE,IACF,OAvCmBxC,CAAM"}