{"version":3,"file":"ProductRating.js","names":["ProductRating","Control","extend","renderer","apiVersion","render","rm","control","tooltip","getTooltip_AsString","openStart","class","attr","openEnd","renderControl","getAggregation","close","metadata","properties","value","type","defaultValue","aggregations","_rating","multiple","visibility","_label","_button","events","change","parameters","constructor","_constructor","id","settings","Control.prototype.constructor.call","this","init","_init","setAggregation","RatingIndicator","getValue","iconSize","liveChange","_onRate","bind","Label","text","addStyleClass","Button","press","_onSubmit","setValue","_setValue","setProperty","reset","_reset","resourceBundle","getModel","getResourceBundle","setDesign","setEnabled","setText","getText","event","ressourceBundle","getParameter","getSource","getMaxValue","fireEvent"],"sources":["ProductRating.ts"],"sourcesContent":["import Control from \"sap/ui/core/Control\";\nimport RenderManager from \"sap/ui/core/RenderManager\";\nimport { MetadataOptions } from \"sap/ui/core/Element\";\nimport Label from \"sap/m/Label\";\nimport Button, { Button$PressEvent } from \"sap/m/Button\";\nimport RatingIndicator, { RatingIndicator$LiveChangeEvent } from \"sap/m/RatingIndicator\";\nimport ResourceBundle from \"sap/base/i18n/ResourceBundle\";\nimport ResourceModel from \"sap/ui/model/resource/ResourceModel\";\n\n/**\n * @namespace ui5.walkthrough.control\n */\nexport default class ProductRating extends Control {\n\t// The following three lines were generated and should remain as-is to make TypeScript aware of the constructor signatures\n\tconstructor(idOrSettings?: string | $ProductRatingSettings);\n\tconstructor(id?: string, settings?: $ProductRatingSettings);\n\tconstructor(id?: string, settings?: $ProductRatingSettings) { super(id, settings); }\t\n\n\tstatic readonly metadata: MetadataOptions = {\n\t\tproperties: {\n\t\t\tvalue: {\n\t\t\t\ttype: \"float\",\n\t\t\t\tdefaultValue: 0\n\t\t\t}\n\t\t},\n\t\taggregations: {\n\t\t\t_rating: {\n\t\t\t\ttype: \"sap.m.RatingIndicator\", \n\t\t\t\tmultiple: false,\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t_label: {\n\t\t\t\ttype: \"sap.m.Label\", \n\t\t\t\tmultiple: false,\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t},\n\t\t\t_button: {\n\t\t\t\ttype: \"sap.m.Button\",\n\t\t\t\tmultiple: false,\n\t\t\t\tvisibility: \"hidden\"\n\t\t\t} \n\t\t},\n\t\tevents: {\n\t\t\tchange: {\n\t\t\t\tparameters: {\n\t\t\t\t\t\"value\": \"float\"\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tinit(): void {\n\t\tthis.setAggregation(\"_rating\", new RatingIndicator({\n\t\t\tvalue: this.getValue(),\n\t\t\ticonSize: \"2rem\",\n\t\t\tliveChange: this._onRate.bind(this)\n\t\t}));\n\t\tthis.setAggregation(\"_label\", new Label({\n\t\t\ttext: \"{i18n>productRatingLabelInitial}\"\n\t\t}).addStyleClass(\"sapUiSmallMargin\"));\n\t\tthis.setAggregation(\"_button\", new Button({\n\t\t\ttext: \"{i18n>productRatingButton}\",\n\t\t\tpress: this._onSubmit.bind(this)\n\t\t}).addStyleClass(\"sapUiTinyMarginTopBottom\"));\n\t}\n\n\tsetValue(value: \"float\" ): ProductRating {\n\t\tthis.setProperty(\"value\", value, true);\n\t\t(<RatingIndicator> this.getAggregation(\"_rating\")).setValue(value);\n\n\t\treturn this;\t\t\n\t}\n\n\treset(): void {\n\t\tconst resourceBundle = <ResourceBundle> (<ResourceModel> this?.getModel(\"i18n\"))?.getResourceBundle();\n\n\t\tthis.setValue(0);\n\t\t(<Label> this.getAggregation(\"_label\")).setDesign(\"Standard\");\n\t\t(<RatingIndicator> this.getAggregation(\"_rating\")).setEnabled(true);\n\t\t(<Label> this.getAggregation(\"_label\")).setText(resourceBundle.getText(\"productRatingLabelInitial\"));\n\t\t(<Button> this.getAggregation(\"_button\")).setEnabled(true);\n\t}\n\n\t_onRate(event: RatingIndicator$LiveChangeEvent): void {\n\t\tconst ressourceBundle = <ResourceBundle> (<ResourceModel> this?.getModel(\"i18n\"))?.getResourceBundle();\n\t\tconst value = event.getParameter(\"value\");\n\n\t\tthis.setProperty(\"value\", value, true);\n\n\t\t(<Label> this.getAggregation(\"_label\")).setText(ressourceBundle.getText(\"productRatingLabelIndicator\", [value, (<RatingIndicator> event.getSource()).getMaxValue()]));\n\t\t(<Label> this.getAggregation(\"_label\")).setDesign(\"Bold\");\n\t}\n\n\t_onSubmit(event: Button$PressEvent): void {\n\t\tconst resourceBundle = <ResourceBundle> (<ResourceModel> this?.getModel(\"i18n\"))?.getResourceBundle();\n\n\t\t(<RatingIndicator> this.getAggregation(\"_rating\")).setEnabled(false);\n\t\t(<Label> this.getAggregation(\"_label\")).setText(resourceBundle.getText(\"productRatingLabelFinal\"));\n\t\t(<Button> this.getAggregation(\"_button\")).setEnabled(false);\n\t\tthis.fireEvent(\"change\", {\n\t\t\tvalue: this.getValue()\n\t\t})\n\t}\n\n\trenderer = {  \n\t\tapiVersion: 4,\n\t\trender: (rm: RenderManager, control: ProductRating) => {\n\t\t\tconst tooltip = control.getTooltip_AsString();\n\t\t\trm.openStart(\"div\", control);\n\t\t\trm.class(\"myAppDemoWTProductRating\");\n\t\t\tif (tooltip) {\n\t\t\t\trm.attr(\"title\", tooltip);\n\t\t\t}\n\t\t\trm.openEnd();\n\t\t\trm.renderControl(<Control> control.getAggregation(\"_rating\"));\n\t\t\trm.renderControl(<Control> control.getAggregation(\"_label\"));\n\t\t\trm.renderControl(<Control> control.getAggregation(\"_button\"));\n\t\t\trm.close(\"div\");\n\t\t}\n\t}\n};\n"],"mappings":"uIASA,MAGqBA,EAAsBC,EAAOC,OAAA,yCA4FjDC,SAAW,CACVC,WAAY,EACZC,OAAQA,CAACC,EAAmBC,KAC3B,MAAMC,EAAUD,EAAQE,sBACxBH,EAAGI,UAAU,MAAOH,GACpBD,EAAGK,MAAM,4BACT,GAAIH,EAAS,CACZF,EAAGM,KAAK,QAASJ,EAClB,CACAF,EAAGO,UACHP,EAAGQ,cAAwBP,EAAQQ,eAAe,YAClDT,EAAGQ,cAAwBP,EAAQQ,eAAe,WAClDT,EAAGQ,cAAwBP,EAAQQ,eAAe,YAClDT,EAAGU,MAAM,MAAM,GAnGDC,SAA4B,CAC3CC,WAAY,CACXC,MAAO,CACNC,KAAM,QACNC,aAAc,IAGhBC,aAAc,CACbC,QAAS,CACRH,KAAM,wBACNI,SAAU,MACVC,WAAY,UAEbC,OAAQ,CACPN,KAAM,cACNI,SAAU,MACVC,WAAY,UAEbE,QAAS,CACRP,KAAM,eACNI,SAAU,MACVC,WAAY,WAGdG,OAAQ,CACPC,OAAQ,CACPC,WAAY,CACXX,MAAS,YA7BbY,YAAW,SAAAC,EAACC,EAAaC,GAAqCC,6BAAAC,KAAMH,EAAIC,EAAW,EAmCnFG,KAAI,SAAAC,IACHF,KAAKG,eAAe,UAAW,IAAIC,EAAgB,CAClDrB,MAAOiB,KAAKK,WACZC,SAAU,OACVC,WAAYP,KAAKQ,QAAQC,KAAKT,SAE/BA,KAAKG,eAAe,SAAU,IAAIO,EAAM,CACvCC,KAAM,qCACJC,cAAc,qBACjBZ,KAAKG,eAAe,UAAW,IAAIU,EAAO,CACzCF,KAAM,6BACNG,MAAOd,KAAKe,UAAUN,KAAKT,QACzBY,cAAc,4BAClB,EAEAI,SAAQ,SAAAC,EAAClC,GACRiB,KAAKkB,YAAY,QAASnC,EAAO,MACdiB,KAAKrB,eAAe,WAAYqC,SAASjC,GAE5D,OAAOiB,IACR,EAEAmB,MAAK,SAAAC,IACJ,MAAMC,EAAmDrB,MAAMsB,SAAS,SAAUC,oBAElFvB,KAAKgB,SAAS,GACLhB,KAAKrB,eAAe,UAAW6C,UAAU,YAC/BxB,KAAKrB,eAAe,WAAY8C,WAAW,MACrDzB,KAAKrB,eAAe,UAAW+C,QAAQL,EAAeM,QAAQ,8BAC7D3B,KAAKrB,eAAe,WAAY8C,WAAW,KACtD,EAEAjB,QAAO,SAAAA,EAACoB,GACP,MAAMC,EAAoD7B,MAAMsB,SAAS,SAAUC,oBACnF,MAAMxC,EAAQ6C,EAAME,aAAa,SAEjC9B,KAAKkB,YAAY,QAASnC,EAAO,MAExBiB,KAAKrB,eAAe,UAAW+C,QAAQG,EAAgBF,QAAQ,8BAA+B,CAAC5C,EAA0B6C,EAAMG,YAAaC,iBAC5IhC,KAAKrB,eAAe,UAAW6C,UAAU,OACnD,EAEAT,UAAS,SAAAA,EAACa,GACT,MAAMP,EAAmDrB,MAAMsB,SAAS,SAAUC,oBAE/DvB,KAAKrB,eAAe,WAAY8C,WAAW,OACrDzB,KAAKrB,eAAe,UAAW+C,QAAQL,EAAeM,QAAQ,4BAC7D3B,KAAKrB,eAAe,WAAY8C,WAAW,OACrDzB,KAAKiC,UAAU,SAAU,CACxBlD,MAAOiB,KAAKK,YAEd,IAkBC,OA5GmBzC,CAAa"}